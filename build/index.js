!function(){"use strict";function e(){return e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e.apply(this,arguments)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=window.wp.element,i=window.wp.i18n,o=window.wp.blocks,l=window.wp.components,a=window.wp.blockEditor,c=void 0;(0,o.registerBlockType)("yummy/recipe-card",{apiVersion:2,title:(0,i.__)("Recipe Card"),description:(0,i.__)("Shows a recipe card.","yummy-recipes"),category:"yummy-recipes",icon:"food",keywords:[(0,i.__)("yummy"),(0,i.__)("recipes"),(0,i.__)("card")],edit:function(t){var o,m,u=t.attributes,s=t.setAttributes,y=(0,a.useBlockProps)(),p=u.mediaID,d=u.mediaURL,_=u.ingredients,h=JSON.parse(_),v=[["core/list",{ordered:!0,placeholder:(0,i.__)("Write instructions for the recipe...","yummy-recipes")}]],f=yummyBlocks.recipeCardNutritionOptions,E=function(e){var t=n(h);h=t;var r=JSON.stringify(e);s({ingredients:r})},b=function(e,t){var r=n(h);if(!("up"===t&&0===e||"down"===t&&e===r.length-1)){var i="up"===t?e-1:e+1;if(i>=r.length)for(var o=i-r.length+1;o--;)r.push(void 0);r.splice(i,0,r.splice(e,1)[0]),E(r)}};return void 0!==h&&h.length&&(o=h.map((function(e,t){return(0,r.createElement)(r.Fragment,{key:t},(0,r.createElement)("tr",null,void 0!==e.name&&(0,r.createElement)(r.Fragment,null,(0,r.createElement)("td",null,(0,r.createElement)(l.TextControl,{label:(0,i.__)("Amount","yummy-recipes"),hideLabelFromVision:!0,value:h[t].amount,onChange:function(e){return function(e,t){var r=n(h);r[t].amount=e,E(r)}(e,t)}})),(0,r.createElement)("td",null,(0,r.createElement)(l.TextControl,{label:(0,i.__)("Unit","yummy-recipes"),hideLabelFromVision:!0,value:h[t].unit,onChange:function(e){return function(e,t){var r=n(h);r[t].unit=e,E(r)}(e,t)}})),(0,r.createElement)("td",null,(0,r.createElement)(l.TextControl,{label:(0,i.__)("Name","yummy-recipes"),hideLabelFromVision:!0,value:h[t].name,onChange:function(e){return function(e,t){var r=n(h);r[t].name=e,E(r)}(e,t)}}))),void 0!==e.title&&(0,r.createElement)("td",{colSpan:"3",style:{paddingTop:"8px"}},(0,r.createElement)(l.TextControl,{label:(0,i.__)("Title","yummy-recipes"),value:h[t].title,onChange:function(e){return function(e,t){var r=n(h);r[t].title=e,E(r)}(e,t)}})),(0,r.createElement)("td",{style:{verticalAlign:"bottom",minWidth:"160px"}},(0,r.createElement)(l.ButtonGroup,null,(0,r.createElement)(l.Button,{isSmall:!0,isDestructive:!0,icon:(0,r.createElement)(l.Icon,{icon:"trash"}),label:(0,i.__)("Delete","yummy-recipes"),onClick:function(){return function(e){var t=n(h);t.length<2||(t.splice(e,1),E(t))}(t)}}),(0,r.createElement)(l.Button,{isSmall:!0,icon:(0,r.createElement)(l.Icon,{icon:"arrow-up-alt2"}),label:(0,i.__)("Move up","yummy-recipes"),onClick:function(){return b(t,"up")}}),(0,r.createElement)(l.Button,{isSmall:!0,icon:(0,r.createElement)(l.Icon,{icon:"arrow-down-alt2"}),label:(0,i.__)("Move down","yummy-recipes"),onClick:function(){return b(t,"down")}})))))}))),m=f.map((function(e,t){return(0,r.createElement)(r.Fragment,{key:t},(0,r.createElement)(l.TextControl,{label:e.name,value:u.nutrition[e.structured_data_name],onChange:function(t){return function(e,t){var n=Object.assign({},u.nutrition);n[t]=e,s({nutrition:n})}(t,e.structured_data_name)}}))})),[(0,r.createElement)("div",e({},y,{key:"yummy-recipe-card"}),(0,r.createElement)(l.Card,{size:"small"},p&&(0,r.createElement)(l.CardMedia,null,(0,r.createElement)("img",{src:d})),(0,r.createElement)("div",{className:"recipe-image"},(0,r.createElement)(a.MediaUpload,{onSelect:function(e){s({mediaURL:e.url,mediaID:e.id})},allowedTypes:"image",value:p,render:function(e){var t=e.open;return(0,r.createElement)(l.Button,{style:{marginRight:"8px"},variant:"secondary",onClick:t},p?(0,i.__)("Change Image","yummy-recipes"):(0,i.__)("Select or Upload Image","yummy-recipes"))}}),p&&(0,r.createElement)(l.Button,{variant:"tertiary",onClick:function(){s({mediaURL:"",mediaID:""})}},(0,i.__)("Remove image","yummy-recipes"))),(0,r.createElement)(l.CardBody,null,(0,r.createElement)("div",{className:"wp-block-columns"},(0,r.createElement)("div",{className:"wp-block-column"},(0,r.createElement)(l.TextControl,{label:(0,i.__)("Prep time","yummy-recipes"),value:u.prepTime||"",type:"number",help:(0,i.__)("Minutes","yummy-recipes"),onChange:function(e){return s({prepTime:e})}})),(0,r.createElement)("div",{className:"wp-block-column"},(0,r.createElement)(l.TextControl,{label:(0,i.__)("Cook time","yummy-recipes"),value:u.cookTime||"",type:"number",help:(0,i.__)("Minutes","yummy-recipes"),onChange:function(e){return s({cookTime:e})}})),(0,r.createElement)("div",{className:"wp-block-column"},(0,r.createElement)(l.TextControl,{label:(0,i.__)("Yield","yummy-recipes"),value:u.yield||"",onChange:function(e){return s({yield:e})}}),(0,r.createElement)(l.Tooltip,{text:(0,i.__)("The quantity produced by the recipe. For example: number of people served, or number of servings.","yummy-recipes")},(0,r.createElement)(l.Icon,{icon:(0,r.createElement)(l.Icon,{icon:"info-outline"}),style:{color:"#757575"}})))),(0,r.createElement)(l.CardDivider,null),(0,r.createElement)("h3",null,(0,i.__)("Description","yummy-recipes")),(0,r.createElement)(a.RichText,{tagName:"p",placeholder:(0,i.__)("Write a short description of the recipe...","yummy-recipes"),value:u.description,onChange:function(e){return s({description:e})},className:"yummy-description"}),(0,r.createElement)(l.CardDivider,null),(0,r.createElement)("h3",null,(0,i.__)("Ingredients","yummy-recipes")),(0,r.createElement)("table",{className:"yummy-table-ingredients"},(0,r.createElement)("thead",null,(0,r.createElement)("tr",null,(0,r.createElement)("td",{style:{width:"15%"}},"Amount"),(0,r.createElement)("td",null,"Unit"),(0,r.createElement)("td",{style:{width:"40%"}},"Name"))),(0,r.createElement)("tbody",null,o)),(0,r.createElement)(l.Button,{style:{marginRight:"8px"},variant:"secondary",onClick:function(){var e=n(h);e.push({amount:"",unit:"",name:""}),E(e)}.bind(c)},(0,i.__)("Add Ingredient","yummy-recipes")),(0,r.createElement)(l.Button,{variant:"secondary",onClick:function(){var e=n(h);e.push({title:""}),E(e)}.bind(c)},(0,i.__)("Add Title","yummy-recipes")),(0,r.createElement)("div",{className:"yummy-instructions"},(0,r.createElement)("h3",null,(0,i.__)("Instructions","yummy-recipes")),(0,r.createElement)(a.InnerBlocks,{template:v,allowedBlocks:["core/heading","core/list","core/paragraph","core/image"]})),(0,r.createElement)("h3",null,(0,i.__)("Nutrition Facts","yummy-recipes")),m,(0,r.createElement)("h3",null,(0,i.__)("Video URL","yummy-recipes")),(0,r.createElement)(l.TextControl,{label:(0,i.__)("Video URL","yummy-recipes"),hideLabelFromVision:!0,value:u.video_url||"",onChange:function(e){return s({video_url:e})}}))))]},save:function(){return(0,r.createElement)(a.InnerBlocks.Content,null)}});var m=window.wp.serverSideRender;(0,o.registerBlockType)("yummy/recipe-collection",{apiVersion:2,title:(0,i.__)("Recipe Collection","yummy-recipes"),description:(0,i.__)("Shows recipes from a selected collection.","yummy-recipes"),category:"yummy-recipes",icon:"food",keywords:[(0,i.__)("yummy"),(0,i.__)("recipes")],edit:function(e){var t=e.attributes,n=e.setAttributes,o=(0,a.useBlockProps)(),c=yummyBlocks.recipeListCollections,u=[];return u.push({label:"---",value:0}),c.forEach((function(e){u.push({label:e.name.replace(/&amp;/g,"&"),value:e.term_id})})),(0,r.createElement)("div",o,(0,r.createElement)(m,{block:"yummy/recipe-collection",attributes:t}),(0,r.createElement)(a.InspectorControls,{key:"setting"},(0,r.createElement)(l.PanelBody,{title:(0,i.__)("Settings","yummy-recipes"),initialOpen:!0},u.length<2&&(0,r.createElement)(l.Notice,{status:"warning",isDismissible:!1},(0,i.__)("You have not created any collections yet, or there are no recipes in your collections.","yummy-recipes")),u.length>1&&(0,r.createElement)(l.SelectControl,{label:(0,i.__)("Collection","yummy-recipes"),value:t.term_id,options:u,onChange:function(e){return n({term_id:Number(e)})}}))))},save:function(){return null}}),(0,o.registerBlockType)("yummy/recipe-index",{apiVersion:2,title:(0,i.__)("Recipe Index","yummy-recipes"),description:(0,i.__)("Choose to group recipes either by alphabets or by terms from a taxonomy.","yummy-recipes"),category:"yummy-recipes",icon:"food",keywords:[(0,i.__)("yummy"),(0,i.__)("recipes")],edit:function(e){var t=e.attributes,n=e.setAttributes,o=(0,a.useBlockProps)(),c=yummyBlocks.taxonomyFilterOptions,u=[];for(var s in c)u.push({label:c[s],value:s});return(0,r.createElement)("div",o,(0,r.createElement)(m,{block:"yummy/recipe-index",attributes:t}),(0,r.createElement)(a.InspectorControls,{key:"setting"},(0,r.createElement)(l.PanelBody,{title:(0,i.__)("Settings","yummy-recipes"),initialOpen:!0},(0,r.createElement)(l.RadioControl,{label:"Type",selected:t.type,options:[{label:(0,i.__)("Alphabets","yummy-recipes"),value:"az"},{label:(0,i.__)("Taxonomies","yummy-recipes"),value:"taxonomies"}],onChange:function(e){return n({type:e})}}),"taxonomies"===t.type&&(0,r.createElement)(l.SelectControl,{label:(0,i.__)("Taxonomy","yummy-recipes"),value:t.taxonomy,options:u,onChange:function(e){return n({taxonomy:e})}}),(0,r.createElement)(l.RadioControl,{label:(0,i.__)("Style","yummy-recipes"),selected:t.style,options:[{label:(0,i.__)("Cards","yummy-recipes"),value:"cards"},{label:(0,i.__)("List","yummy-recipes"),value:"list"}],onChange:function(e){return n({style:e})}}),"az"===t.type&&(0,r.createElement)(l.ToggleControl,{label:(0,i.__)("Show links to groups","yummy-recipes"),checked:t.links,onChange:function(e){return n({links:Boolean(e)})}}))))},save:function(){return null}}),(0,o.registerBlockType)("yummy/term-index",{apiVersion:2,title:(0,i.__)("Term Index","yummy-recipes"),description:(0,i.__)("Shows recipe term index.","yummy-recipes"),category:"yummy-recipes",icon:"food",keywords:[(0,i.__)("yummy"),(0,i.__)("recipes")],edit:function(e){var t=e.attributes,n=e.setAttributes,o=(0,a.useBlockProps)(),c=yummyBlocks.taxonomyFilterOptions,u=[],s=function(e){u.push((0,r.createElement)(l.CheckboxControl,{key:e,label:c[e],checked:t.taxonomies.includes(e),onChange:function(){!function(e){var r=t.taxonomies.slice(0,t.taxonomies.length);if(r.includes(e)){var i=r.indexOf(e);-1!==i&&r.splice(i,1)}else r.push(e);n({taxonomies:r})}(e)}}))};for(var y in c)s(y);return(0,r.createElement)("div",o,(0,r.createElement)(m,{block:"yummy/term-index",attributes:t}),(0,r.createElement)(a.InspectorControls,{key:"setting"},(0,r.createElement)(l.PanelBody,{title:(0,i.__)("Options","yummy-recipes"),initialOpen:!0},(0,r.createElement)("h3",null,(0,i.__)("Displayed taxonomies","yummy-recipes")),u,(0,r.createElement)(l.RadioControl,{label:(0,i.__)("Style","yummy-recipes"),selected:t.style,options:[{label:(0,i.__)("Cards","yummy-recipes"),value:"cards"},{label:(0,i.__)("List","yummy-recipes"),value:"list"}],onChange:function(e){return n({style:e})}}),(0,r.createElement)(l.ToggleControl,{label:(0,i.__)("Show recipe count","yummy-recipes"),checked:t.show_count,onChange:function(e){return n({show_count:e})}}))))},save:function(){return null}})}();